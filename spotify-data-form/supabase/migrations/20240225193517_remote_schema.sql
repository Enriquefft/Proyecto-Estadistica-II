alter table "public"."users" drop constraint "users_pkey";

drop index if exists "public"."users_pkey";

alter table "public"."users" drop column "average_duration_acoustic";

alter table "public"."users" drop column "average_duration_afrobeat";

alter table "public"."users" drop column "average_duration_alt_rock";

alter table "public"."users" drop column "average_duration_alternative";

alter table "public"."users" drop column "average_duration_ambient";

alter table "public"."users" drop column "average_duration_anime";

alter table "public"."users" drop column "average_duration_black_metal";

alter table "public"."users" drop column "average_duration_bluegrass";

alter table "public"."users" drop column "average_duration_blues";

alter table "public"."users" drop column "average_duration_bossanova";

alter table "public"."users" drop column "average_duration_brazil";

alter table "public"."users" drop column "average_duration_breakbeat";

alter table "public"."users" drop column "average_duration_british";

alter table "public"."users" drop column "average_duration_cantopop";

alter table "public"."users" drop column "average_duration_chicago_house";

alter table "public"."users" drop column "average_duration_children";

alter table "public"."users" drop column "average_duration_chill";

alter table "public"."users" drop column "average_duration_classical";

alter table "public"."users" drop column "average_duration_club";

alter table "public"."users" drop column "average_duration_comedy";

alter table "public"."users" drop column "average_duration_country";

alter table "public"."users" drop column "average_duration_dance";

alter table "public"."users" drop column "average_duration_dancehall";

alter table "public"."users" drop column "average_duration_death_metal";

alter table "public"."users" drop column "average_duration_deep_house";

alter table "public"."users" drop column "average_duration_detroit_techno";

alter table "public"."users" drop column "average_duration_disco";

alter table "public"."users" drop column "average_duration_disney";

alter table "public"."users" drop column "average_duration_drum_and_bass";

alter table "public"."users" drop column "average_duration_dub";

alter table "public"."users" drop column "average_duration_dubstep";

alter table "public"."users" drop column "average_duration_edm";

alter table "public"."users" drop column "average_duration_electro";

alter table "public"."users" drop column "average_duration_electronic";

alter table "public"."users" drop column "average_duration_emo";

alter table "public"."users" drop column "average_duration_folk";

alter table "public"."users" drop column "average_duration_forro";

alter table "public"."users" drop column "average_duration_french";

alter table "public"."users" drop column "average_duration_funk";

alter table "public"."users" drop column "average_duration_garage";

alter table "public"."users" drop column "average_duration_german";

alter table "public"."users" drop column "average_duration_gospel";

alter table "public"."users" drop column "average_duration_goth";

alter table "public"."users" drop column "average_duration_grindcore";

alter table "public"."users" drop column "average_duration_groove";

alter table "public"."users" drop column "average_duration_grunge";

alter table "public"."users" drop column "average_duration_guitar";

alter table "public"."users" drop column "average_duration_happy";

alter table "public"."users" drop column "average_duration_hard_rock";

alter table "public"."users" drop column "average_duration_hardcore";

alter table "public"."users" drop column "average_duration_hardstyle";

alter table "public"."users" drop column "average_duration_heavy_metal";

alter table "public"."users" drop column "average_duration_hip_hop";

alter table "public"."users" drop column "average_duration_holidays";

alter table "public"."users" drop column "average_duration_honky_tonk";

alter table "public"."users" drop column "average_duration_house";

alter table "public"."users" drop column "average_duration_idm";

alter table "public"."users" drop column "average_duration_indian";

alter table "public"."users" drop column "average_duration_indie";

alter table "public"."users" drop column "average_duration_indie_pop";

alter table "public"."users" drop column "average_duration_industrial";

alter table "public"."users" drop column "average_duration_iranian";

alter table "public"."users" drop column "average_duration_j_dance";

alter table "public"."users" drop column "average_duration_j_idol";

alter table "public"."users" drop column "average_duration_j_pop";

alter table "public"."users" drop column "average_duration_j_rock";

alter table "public"."users" drop column "average_duration_jazz";

alter table "public"."users" drop column "average_duration_k_pop";

alter table "public"."users" drop column "average_duration_kids";

alter table "public"."users" drop column "average_duration_latin";

alter table "public"."users" drop column "average_duration_latino";

alter table "public"."users" drop column "average_duration_malay";

alter table "public"."users" drop column "average_duration_mandopop";

alter table "public"."users" drop column "average_duration_metal";

alter table "public"."users" drop column "average_duration_metal_misc";

alter table "public"."users" drop column "average_duration_metalcore";

alter table "public"."users" drop column "average_duration_minimal_techno";

alter table "public"."users" drop column "average_duration_movies";

alter table "public"."users" drop column "average_duration_mpb";

alter table "public"."users" drop column "average_duration_new_age";

alter table "public"."users" drop column "average_duration_new_release";

alter table "public"."users" drop column "average_duration_opera";

alter table "public"."users" drop column "average_duration_pagode";

alter table "public"."users" drop column "average_duration_party";

alter table "public"."users" drop column "average_duration_philippines_opm";

alter table "public"."users" drop column "average_duration_piano";

alter table "public"."users" drop column "average_duration_pop";

alter table "public"."users" drop column "average_duration_pop_film";

alter table "public"."users" drop column "average_duration_post_dubstep";

alter table "public"."users" drop column "average_duration_power_pop";

alter table "public"."users" drop column "average_duration_progressive_house";

alter table "public"."users" drop column "average_duration_psych_rock";

alter table "public"."users" drop column "average_duration_punk";

alter table "public"."users" drop column "average_duration_punk_rock";

alter table "public"."users" drop column "average_duration_r_n_b";

alter table "public"."users" drop column "average_duration_rainy_day";

alter table "public"."users" drop column "average_duration_reggae";

alter table "public"."users" drop column "average_duration_reggaeton";

alter table "public"."users" drop column "average_duration_road_trip";

alter table "public"."users" drop column "average_duration_rock";

alter table "public"."users" drop column "average_duration_rock_n_roll";

alter table "public"."users" drop column "average_duration_rockabilly";

alter table "public"."users" drop column "average_duration_romance";

alter table "public"."users" drop column "average_duration_sad";

alter table "public"."users" drop column "average_duration_salsa";

alter table "public"."users" drop column "average_duration_samba";

alter table "public"."users" drop column "average_duration_sertanejo";

alter table "public"."users" drop column "average_duration_show_tunes";

alter table "public"."users" drop column "average_duration_singer_songwriter";

alter table "public"."users" drop column "average_duration_ska";

alter table "public"."users" drop column "average_duration_sleep";

alter table "public"."users" drop column "average_duration_songwriter";

alter table "public"."users" drop column "average_duration_soul";

alter table "public"."users" drop column "average_duration_soundtracks";

alter table "public"."users" drop column "average_duration_spanish";

alter table "public"."users" drop column "average_duration_study";

alter table "public"."users" drop column "average_duration_summer";

alter table "public"."users" drop column "average_duration_swedish";

alter table "public"."users" drop column "average_duration_synth_pop";

alter table "public"."users" drop column "average_duration_tango";

alter table "public"."users" drop column "average_duration_techno";

alter table "public"."users" drop column "average_duration_trance";

alter table "public"."users" drop column "average_duration_trip_hop";

alter table "public"."users" drop column "average_duration_turkish";

alter table "public"."users" drop column "average_duration_work_out";

alter table "public"."users" drop column "average_duration_world_music";

alter table "public"."users" drop column "listened_acoustic_rate";

alter table "public"."users" drop column "listened_afrobeat_rate";

alter table "public"."users" drop column "listened_alt_rock_rate";

alter table "public"."users" drop column "listened_alternative_rate";

alter table "public"."users" drop column "listened_ambient_rate";

alter table "public"."users" drop column "listened_anime_rate";

alter table "public"."users" drop column "listened_black_metal_rate";

alter table "public"."users" drop column "listened_bluegrass_rate";

alter table "public"."users" drop column "listened_blues_rate";

alter table "public"."users" drop column "listened_bossanova_rate";

alter table "public"."users" drop column "listened_brazil_rate";

alter table "public"."users" drop column "listened_breakbeat_rate";

alter table "public"."users" drop column "listened_british_rate";

alter table "public"."users" drop column "listened_cantopop_rate";

alter table "public"."users" drop column "listened_chicago_house_rate";

alter table "public"."users" drop column "listened_children_rate";

alter table "public"."users" drop column "listened_chill_rate";

alter table "public"."users" drop column "listened_classical_rate";

alter table "public"."users" drop column "listened_club_rate";

alter table "public"."users" drop column "listened_comedy_rate";

alter table "public"."users" drop column "listened_country_rate";

alter table "public"."users" drop column "listened_dance_rate";

alter table "public"."users" drop column "listened_dancehall_rate";

alter table "public"."users" drop column "listened_death_metal_rate";

alter table "public"."users" drop column "listened_deep_house_rate";

alter table "public"."users" drop column "listened_detroit_techno_rate";

alter table "public"."users" drop column "listened_disco_rate";

alter table "public"."users" drop column "listened_disney_rate";

alter table "public"."users" drop column "listened_drum_and_bass_rate";

alter table "public"."users" drop column "listened_dub_rate";

alter table "public"."users" drop column "listened_dubstep_rate";

alter table "public"."users" drop column "listened_edm_rate";

alter table "public"."users" drop column "listened_electro_rate";

alter table "public"."users" drop column "listened_electronic_rate";

alter table "public"."users" drop column "listened_emo_rate";

alter table "public"."users" drop column "listened_folk_rate";

alter table "public"."users" drop column "listened_forro_rate";

alter table "public"."users" drop column "listened_french_rate";

alter table "public"."users" drop column "listened_funk_rate";

alter table "public"."users" drop column "listened_garage_rate";

alter table "public"."users" drop column "listened_german_rate";

alter table "public"."users" drop column "listened_gospel_rate";

alter table "public"."users" drop column "listened_goth_rate";

alter table "public"."users" drop column "listened_grindcore_rate";

alter table "public"."users" drop column "listened_groove_rate";

alter table "public"."users" drop column "listened_grunge_rate";

alter table "public"."users" drop column "listened_guitar_rate";

alter table "public"."users" drop column "listened_happy_rate";

alter table "public"."users" drop column "listened_hard_rock_rate";

alter table "public"."users" drop column "listened_hardcore_rate";

alter table "public"."users" drop column "listened_hardstyle_rate";

alter table "public"."users" drop column "listened_heavy_metal_rate";

alter table "public"."users" drop column "listened_hip_hop_rate";

alter table "public"."users" drop column "listened_holidays_rate";

alter table "public"."users" drop column "listened_honky_tonk_rate";

alter table "public"."users" drop column "listened_house_rate";

alter table "public"."users" drop column "listened_idm_rate";

alter table "public"."users" drop column "listened_indian_rate";

alter table "public"."users" drop column "listened_indie_pop_rate";

alter table "public"."users" drop column "listened_indie_rate";

alter table "public"."users" drop column "listened_industrial_rate";

alter table "public"."users" drop column "listened_iranian_rate";

alter table "public"."users" drop column "listened_j_dance_rate";

alter table "public"."users" drop column "listened_j_idol_rate";

alter table "public"."users" drop column "listened_j_pop_rate";

alter table "public"."users" drop column "listened_j_rock_rate";

alter table "public"."users" drop column "listened_jazz_rate";

alter table "public"."users" drop column "listened_k_pop_rate";

alter table "public"."users" drop column "listened_kids_rate";

alter table "public"."users" drop column "listened_latin_rate";

alter table "public"."users" drop column "listened_latino_rate";

alter table "public"."users" drop column "listened_malay_rate";

alter table "public"."users" drop column "listened_mandopop_rate";

alter table "public"."users" drop column "listened_metal_misc_rate";

alter table "public"."users" drop column "listened_metal_rate";

alter table "public"."users" drop column "listened_metalcore_rate";

alter table "public"."users" drop column "listened_minimal_techno_rate";

alter table "public"."users" drop column "listened_movies_rate";

alter table "public"."users" drop column "listened_mpb_rate";

alter table "public"."users" drop column "listened_new_age_rate";

alter table "public"."users" drop column "listened_new_release_rate";

alter table "public"."users" drop column "listened_opera_rate";

alter table "public"."users" drop column "listened_pagode_rate";

alter table "public"."users" drop column "listened_party_rate";

alter table "public"."users" drop column "listened_philippines_opm_rate";

alter table "public"."users" drop column "listened_piano_rate";

alter table "public"."users" drop column "listened_pop_film_rate";

alter table "public"."users" drop column "listened_pop_rate";

alter table "public"."users" drop column "listened_post_dubstep_rate";

alter table "public"."users" drop column "listened_power_pop_rate";

alter table "public"."users" drop column "listened_progressive_house_rate";

alter table "public"."users" drop column "listened_psych_rock_rate";

alter table "public"."users" drop column "listened_punk_rate";

alter table "public"."users" drop column "listened_punk_rock_rate";

alter table "public"."users" drop column "listened_r_n_b_rate";

alter table "public"."users" drop column "listened_rainy_day_rate";

alter table "public"."users" drop column "listened_reggae_rate";

alter table "public"."users" drop column "listened_reggaeton_rate";

alter table "public"."users" drop column "listened_road_trip_rate";

alter table "public"."users" drop column "listened_rock_n_roll_rate";

alter table "public"."users" drop column "listened_rock_rate";

alter table "public"."users" drop column "listened_rockabilly_rate";

alter table "public"."users" drop column "listened_romance_rate";

alter table "public"."users" drop column "listened_sad_rate";

alter table "public"."users" drop column "listened_salsa_rate";

alter table "public"."users" drop column "listened_samba_rate";

alter table "public"."users" drop column "listened_sertanejo_rate";

alter table "public"."users" drop column "listened_show_tunes_rate";

alter table "public"."users" drop column "listened_singer_songwriter_rate";

alter table "public"."users" drop column "listened_ska_rate";

alter table "public"."users" drop column "listened_sleep_rate";

alter table "public"."users" drop column "listened_songwriter_rate";

alter table "public"."users" drop column "listened_soul_rate";

alter table "public"."users" drop column "listened_soundtracks_rate";

alter table "public"."users" drop column "listened_spanish_rate";

alter table "public"."users" drop column "listened_study_rate";

alter table "public"."users" drop column "listened_summer_rate";

alter table "public"."users" drop column "listened_swedish_rate";

alter table "public"."users" drop column "listened_synth_pop_rate";

alter table "public"."users" drop column "listened_tango_rate";

alter table "public"."users" drop column "listened_techno_rate";

alter table "public"."users" drop column "listened_trance_rate";

alter table "public"."users" drop column "listened_trip_hop_rate";

alter table "public"."users" drop column "listened_turkish_rate";

alter table "public"."users" drop column "listened_work_out_rate";

alter table "public"."users" drop column "listened_world_music_rate";

alter table "public"."users" drop column "spotifyId";

alter table "public"."users" add column "spotify_id" character varying not null;

CREATE UNIQUE INDEX users_pkey ON public.users USING btree (spotify_id);

alter table "public"."users" add constraint "users_pkey" PRIMARY KEY using index "users_pkey";

set check_function_bodies = off;

CREATE OR REPLACE FUNCTION public.populate_users_table(num_records integer DEFAULT 200)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
    current_record INTEGER :=  1;
BEGIN
    WHILE current_record <= num_records LOOP
        INSERT INTO public.users (
            spotify_id, study_center, age, district, percieved_variety,
            average_danceability, average_listened_artists, percieved_favourite_gender, average_loudness
        ) VALUES (
            -- Assuming you have a sequence for spotifyId or another method to ensure uniqueness
            -- Replace 'your_sequence_name' with the actual name of your sequence
            MD5(RANDOM()::TEXT), -- Replace with your sequence or ID generation logic
            -- You need to define the range and distribution for your random values
            MD5(RANDOM()::TEXT), -- Example for study_center
            ROUND(RANDOM() * (38 -  10 +  1) +  10), -- Example for age between  18 and  100
            (ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.lima_districts))))[floor(random() * array_upper(ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.lima_districts))),  1)) +  1], -- Random district
            (ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.variety))))[floor(random() * array_upper(ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.variety))),  1)) +  1], -- Random variety
            RANDOM(), -- Example for average_danceability
            RANDOM(), -- Example for average_listened_artists
            (ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.genre))))[floor(random() * array_upper(ARRAY(SELECT UNNEST(ENUM_RANGE(NULL::public.genre))),  1)) +  1], -- Random genre
             -60 + (RANDOM() *  60) -- Example for average_loudness
        );
        current_record := current_record +  1;
    END LOOP;
END;
$function$
;


